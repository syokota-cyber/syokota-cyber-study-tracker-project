# StudyTracker AWS移行要件定義書

## 📋 文書情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | StudyTracker |
| 文書名 | AWS移行要件定義書 |
| 版数 | v1.0 |
| 作成日 | 2025年8月3日 |
| 作成者 | AIアシスタント |
| 承認者 | - |

---

## 🎯 移行概要

### 移行の目的
- ローカル開発環境からAWSクラウド環境への移行
- 既存のRoute53ドメイン（learninggarden.studio）とCloudFrontディストリビューションの活用
- 月間$5.50以内での運用コスト実現
- サーバーレスアーキテクチャによるスケーラビリティの確保

### 移行の背景
- 現在のローカル開発環境の限界
- 本番環境での安定運用の必要性
- 既存AWSリソースの有効活用
- コスト効率的な運用の実現

---

## 🏗️ 既存リソースの現状

### Route53設定
- **ドメイン**: learninggarden.studio
- **ホストゾーンID**: Z101042423Z2DRKY6F711
- **現在の設定**:
  - Aレコード: learninggarden.studio → CloudFront (d198uibra12k42.cloudfront.net)
  - NSレコード: AWS DNSサーバー
  - SOAレコード: ゾーン情報
  - CNAMEレコード: ACM証明書検証用

### CloudFront設定
- **ディストリビューションID**: E3RTAE75MJ0MSH
- **ドメイン名**: dq90z1ht2u7q4.cloudfront.net
- **現在の設定**:
  - オリジン: my-landing-page-bucket-20250427.s3.ap-northeast-1.amazonaws.com
  - エイリアス: learninggarden.studio
  - SSL証明書: ACM証明書（arn:aws:acm:us-east-1:572163715344:certificate/ad191ceb-ce49-45d8-9e0e-b1b2010267dc）
  - ステータス: Deployed（Enabled: false）

### 既存AWSリソース
- **Lambda関数**: study-tracker-api
- **DynamoDBテーブル**: study-records（On-Demandモード）
- **S3バケット**: study-tracker-2025-1754182796
- **IAMロール**: study-tracker-lambda-role

---

## 📊 移行要件

### 機能要件

#### F001: API機能の移行
- **概要**: FastAPIアプリケーションのLambda移行
- **詳細**:
  - 学習記録のCRUD操作
  - 学習目標の管理
  - カテゴリ管理
  - 統計・分析機能
- **優先度**: 高
- **担当**: 開発者

#### F002: フロントエンドの移行
- **概要**: Vue.js/ReactアプリケーションのS3+CloudFront移行
- **詳細**:
  - 静的ファイルのホスティング
  - CloudFrontによるCDN配信
  - 既存ドメインでのアクセス
- **優先度**: 高
- **担当**: 開発者

#### F003: データベース移行
- **概要**: SQLiteからDynamoDBへの移行
- **詳細**:
  - 既存データの移行
  - スキーマ設計の最適化
  - パフォーマンス調整
- **優先度**: 高
- **担当**: 開発者

#### F004: CI/CDパイプライン
- **概要**: GitHub Actionsによる自動デプロイ
- **詳細**:
  - コード変更時の自動デプロイ
  - テスト実行
  - 環境別デプロイ（dev/prod）
- **優先度**: 中
- **担当**: 開発者

### 非機能要件

#### NF001: パフォーマンス
- **API応答時間**: 平均200ms以下
- **ページ読み込み時間**: 3秒以下
- **可用性**: 99.9%以上

#### NF002: セキュリティ
- **HTTPS通信**: 全通信の暗号化
- **CORS設定**: 適切なオリジン制御
- **IAM権限**: 最小権限の原則

#### NF003: コスト
- **月間運用コスト**: $5.50以下
- **開発環境**: $1.28/月
- **本番環境**: $4.23/月

#### NF004: スケーラビリティ
- **自動スケーリング**: トラフィックに応じた自動調整
- **負荷分散**: CloudFrontによる地理的分散

---

## 🔄 移行戦略

### 段階的移行アプローチ

#### Phase 1: 基盤構築（1週間）
- 既存リソースの確認・整理
- Lambda関数の設定・テスト
- DynamoDBテーブルの最適化
- 基本的なAPI機能の動作確認

#### Phase 2: アプリケーション移行（1週間）
- フロントエンドのS3移行
- CloudFront設定の更新
- API Gatewayの設定
- エンドツーエンドテスト

#### Phase 3: 本番化（1週間）
- CI/CDパイプラインの構築
- モニタリング・ログ設定
- セキュリティ強化
- パフォーマンス最適化

### リスク管理

#### 技術リスク
- **データ損失**: バックアップ戦略の実装
- **ダウンタイム**: ブルーグリーンデプロイメント
- **パフォーマンス劣化**: 段階的な移行とテスト

#### 運用リスク
- **コスト超過**: 厳格なコスト監視
- **セキュリティ問題**: 定期的なセキュリティ監査
- **可用性低下**: 冗長化とフェイルオーバー

---

## 📅 移行スケジュール

### Week 1: 基盤構築
- [ ] 既存リソースの詳細調査
- [ ] Lambda関数の最適化
- [ ] DynamoDBスキーマ設計
- [ ] 基本的なAPIテスト

### Week 2: アプリケーション移行
- [ ] フロントエンドのS3移行
- [ ] CloudFront設定更新
- [ ] API Gateway設定
- [ ] 統合テスト

### Week 3: 本番化
- [ ] CI/CDパイプライン構築
- [ ] モニタリング設定
- [ ] セキュリティ強化
- [ ] 本番リリース

---

## ✅ 成功指標

### 技術指標
- API応答時間: 200ms以下
- ページ読み込み時間: 3秒以下
- エラー率: 1%以下
- 可用性: 99.9%以上

### ビジネス指標
- 月間運用コスト: $5.50以下
- 移行ダウンタイム: 30分以下
- データ整合性: 100%
- ユーザー体験: 改善

---

## 🔒 セキュリティ要件

### データ保護
- 転送時・保存時の暗号化
- 個人情報の適切な取り扱い
- アクセスログの記録

### アクセス制御
- IAMロールの最小権限設定
- API認証の実装
- セキュリティグループの設定

### 監査・コンプライアンス
- 定期的なセキュリティ監査
- コンプライアンス要件の確認
- インシデント対応計画

---

## 📋 制約事項

### 技術制約
- 既存のRoute53ドメイン設定を維持
- CloudFrontディストリビューションの活用
- 月間$5.50のコスト制限

### スケジュール制約
- 3週間での移行完了
- 最小限のダウンタイム
- 段階的な機能移行

### リソース制約
- 開発者1名での作業
- 既存AWSリソースの活用
- 無料枠の最大活用

---

## ✅ 承認

| 役割 | 名前 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトマネージャー | 学習者 | 2025年8月3日 | - |
| 技術責任者 | AIアシスタント | 2025年8月3日 | - |

---

**文書バージョン**: v1.0  
**最終更新日**: 2025年8月3日 